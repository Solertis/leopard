"use strict";function run(t){for(var e=0;e<queue.length&&!(1>t);e++){for(var n=queue[e];n.length&&!(1>t);){counter--,t-=e*e;var i=n.shift();i&&"function"==typeof i&&i(),n.length||singletonEmitter.emit(e)}if(e===queue.length-1&&0===counter)return!1}return!0}function enqueue(t,e,n){if(n)for(;n--;)queue[t].push(e),counter++;else queue[t].push(e),counter++}function frame(t){isRunning&&(styleEnd=t,styleDuration=styleStart?styleEnd-styleStart:goal,scriptDuration=scriptEnd-scriptStart,scriptStart=now(),styleDuration>=goal&&goal+1>styleDuration&&0!==styleDuration?(accelerate=2*accelerate,limit+=accelerate):styleDuration>=goal+1&&(accelerate=1,limit=Math.floor(limit/2)),1>limit&&(limit=1),run(limit)||stop(),scriptEnd=now(),styleStart=t,requestAnimationFrame(frame),window&&window.requestIdleCallback&&requestIdleCallback(function(t){if(t.timeRemaining()>0){var e=t.timeRemaining()/perFrame;run(Math.floor(limit*e))}}))}function now(){return performance.now()||Date.now()}function stop(){accelerate=1,isRunning=!1}function start(){scriptStart=null,scriptEnd=null,styleStart=null,styleEnd=null,isRunning=!0,requestAnimationFrame(frame)}function put(t,e,n){enqueue(t,e,n),isRunning||start()}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),o=window.setTimeout(function(){e(i+r)},r);return t=i+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var Emitter=function(){this.uid=0,this.handlers=[];for(var t=0;1e3>t;t++)this.handlers.push([])};Emitter.prototype.on=function(t,e){this.handlers[t].push({id:this.uid++,action:e})},Emitter.prototype.emit=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];this.handlers[t].forEach(function(t){"function"==typeof t.action&&t.action.apply(t,n)})},Emitter.prototype.once=function(t,e){var n=this,i=this.uid;this.on(t,function(){e.apply(void 0,arguments);var r=n.handlers[t].find(function(t){return t.id===i});n.handlers[t].splice(n.handlers[t].indexOf(r),1)})};for(var singletonEmitter=new Emitter,queue=[],counter=0,levels=1e3,i=0;levels>i;i++)queue.push([]);var perFrame=16,limit=10,balance=limit,goal=perFrame,isRunning=!1,accelerate=1,scriptStart,scriptEnd,styleStart,styleEnd,styleDuration,scriptDuration,Leopard={on:singletonEmitter.on.bind(singletonEmitter),once:singletonEmitter.once.bind(singletonEmitter),start:start,stop:stop,put:put};"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=Leopard:"function"==typeof define&&"undefined"!=typeof define.amd?define(function(){return Leopard}):window.Leopard=Leopard;
//# sourceMappingURL=leopard.min.js.map
