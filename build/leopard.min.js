"use strict";function run(t){for(var e=0;e<queue.length&&!(1>t);e++){for(var n=queue[e];n.length&&!(1>t);){counter--,t--;var i=n.shift();i&&"function"==typeof i&&i(),n.length||singletonEmitter.emit(e)}if(e===queue.length-1&&0===counter)return!1}return!0}function enqueue(t,e,n){if(n)for(;n--;)queue[t].push(e),counter++;else queue[t].push(e),counter++}function flush(){for(var t=0;levels>t;t++)queue[t].length=0;counter=0}function frame(t){if(isRunning){styleEnd=t,styleDuration=styleStart?styleEnd-styleStart:expectedFrame,scriptDuration=scriptEnd-scriptStart;var e=!0,n=!0;"batch"===strategy?(e=expectedFrame+1>scriptDuration,n=scriptDuration>=expectedFrame+1):(e=styleDuration>=expectedFrame&&expectedFrame+1>styleDuration&&0!==styleDuration,n=styleDuration>=expectedFrame+1),e?(accelerate*=perf,count+=accelerate):n&&(accelerate=1,count=Math.floor(count/2)),1>count&&(count=1),scriptStart=window.performance.now();var i=run(count);!i&&autoStop||(scriptEnd=window.performance.now(),styleStart=t,window.requestAnimationFrame(frame),window&&window.requestIdleCallback&&window.requestIdleCallback(function(t){if(t.timeRemaining()>0){var e=t.timeRemaining()/perFrame;run(Math.floor(count*e))}}))}}function stop(){accelerate=1,count=limit,isRunning=!1,flush()}function start(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];isRunning||window.requestAnimationFrame(frame),t.limit&&(limit=count=t.limit),t.expectedFrame&&(expectedFrame=t.expectedFrame),t.strategy&&(strategy=t.strategy),t.perf&&(perf=t.perf),t.autoStop&&(autoStop=t.autoStop),scriptStart=null,scriptEnd=null,styleStart=null,styleEnd=null,isRunning=!0}function put(t,e,n){enqueue(t,e,n)}function getCount(){return count}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},Emitter=function(){this.uid=0,this.handlers=[];for(var t=0;1e3>t;t++)this.handlers.push([])};Emitter.prototype.on=function(t,e){this.handlers[t].push({id:this.uid++,action:e})},Emitter.prototype.emit=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];this.handlers[t].forEach(function(t){"function"==typeof t.action&&t.action.apply(t,n)})},Emitter.prototype.once=function(t,e){var n=this,i=this.uid;this.on(t,function(){e.apply(void 0,arguments);var r=n.handlers[t].find(function(t){return t.id===i});n.handlers[t].splice(n.handlers[t].indexOf(r),1)})};var singletonEmitter=new Emitter;!function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),o=window.setTimeout(function(){e(i+r)},r);return t=i+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var t=Date.now();window.performance.timing&&window.performance.timing.navigationStart&&(t=window.performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}}();for(var queue=[],counter=0,levels=1e3,i=0;levels>i;i++)queue.push([]);var perFrame=16,expectedFrame=perFrame,limit=1e3,count=limit,strategy="normal",perf=2,autoStop=!1,isRunning=!1,accelerate=1,scriptStart,scriptEnd,styleStart,styleEnd,styleDuration,scriptDuration,Leopard={on:singletonEmitter.on.bind(singletonEmitter),once:singletonEmitter.once.bind(singletonEmitter),start:start,stop:stop,put:put,get limit(){return getCount()}};"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=Leopard:"function"==typeof define&&"undefined"!=typeof define.amd?define(function(){return Leopard}):window.Leopard=Leopard;
//# sourceMappingURL=leopard.min.js.map
